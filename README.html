<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7614 2013-02-21 15:55:51Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<p># ps2ff
Produce approximated finite fault distances and variance corrections given point source
information (e.g., Repi (epcentral distance) to Rjb (Joyner-Boore distance)</p>
<p>NOTICE: The code and output in this repository is distributed solely for purposes of
scientific peer review. Its content is deliberative and predecisional. Because it has
not yet been approved by the U.S. Geological Survey (USGS), it does not represent any
official USGS finding or policy.</p>
<div class="section" id="programs">
<h1>Programs</h1>
<p>The programs are Python (either 2.7 or 3.5) and require Numpy and Scipy. The easiest
way to get Numpy and Scipy is to install Anaconda. The programs will run on multiple
processors (cores) on machines so equipped.</p>
<p>To run the programs, do:</p>
<blockquote>
% program.py config_file.ini</blockquote>
</div>
<div class="section" id="the-programs">
<h1>The Programs</h1>
<p><strong>RjbMeanVar.py</strong>: Produces tables of Repi-to-Rjb ratios and variances. Example config
file &quot;test_Rjb.ini&quot;. The parameters are:</p>
<p>NP: The number of processors (cores) to use. Minimum 1.
filebase: The base name of the output file (see output file naming convention below).</p>
<p>datadir: The directory into which the output files are written.</p>
<p>rup_dim_model: If 'WC94' use Wells and Coppersmith (1994) model, otherwise use Somerville
(2014).</p>
<p>mech: The rupture mechanism. One of &quot;A&quot; (all mechanisms), &quot;SS&quot; (strike-slip), &quot;N&quot; (normal),
or &quot;R&quot; (reverse).</p>
<p>LW: (True or False) Use separate rupture Length and Width distributions rather than a
rupture area distribution with a fixed aspect ratio.</p>
<p>AR: The Aspect Ratio (Length/Width) of the rupture. The aspect ratio will be maintained
until the rupture width spans the seismogenic zone, after which only the rupture
length will increase.</p>
<p>min_seis_depth: The minimum seismogenic depth (km, integer).</p>
<p>max_seis_depth: The maximum seismogenic depth (km, integer).</p>
<p>mindip_deg: The minimum rupture dip in degrees (0 min, 90 max, integer).</p>
<p>maxdip_deg: The maximum rupture dip in degrees (0 min 90 max, integer).</p>
<p>ndip: The number of discrete steps in dip to use in the integration. Larger numbers
increase the accuracy of the result, but take longer to run.</p>
<p>ntheta: The number of discrete steps in theta to use in the integration. Larger numbers
increase the accuracy of the result, but take longer to run.</p>
<p>nxny: The number of discrete steps in x and y to use in the integration. Larger numbers
increase the accuracy of the result, but take longer to run. (Min 2)</p>
<p>trunc: For the integration in area (or length and width), trunc is the truncation
of the normal distribution (in units of sigma).</p>
<p>neps: The number of steps to integrate from -trunc to +trunc. Larger numbers
increase the accuracy of the result, but take longer to run.</p>
<p>minmag: The minimum magnitude for which to compute results (float).</p>
<p>maxmag: The maximum magnitude for which to compute results (float).</p>
<p>dmag: The size of the steps from minmag to maxmag (float).</p>
<p>minepi: The minimum epicentral distance for which to compute results (float).</p>
<p>maxepi: The maximum epicentral distance for which to compute results (float).</p>
<p>nepi: The number of steps from minepi to max epi. The steps will be uniformly sized
in log space.</p>
<p><strong>RrupMeanVar.py</strong>: Produces tables of Repi-to-Rrup ratios and variances. Example config
file &quot;test_Rrup.ini&quot;. The parameters are the same as for RjbMeanVar.py, above, with the
addition of:
nz: The number of steps in depth for Ztor. For any given rupture width and dip in the
integration, Ztor ranges from (max_seis_depth - width * sin(dip)) to min_seis_depth.</p>
<p><strong>RrupRjbMeanVar_SingleEvent.py</strong>: Produces tables of Repi-to-Rrup and Repi-to-Rjb ratios
and variances as a function of backazimuth for a particular earthquake magnitude and
hypocentral depth. Example config file &quot;test_single.ini&quot;. The parameters NP, datadir,
rum_dim_model, mech, AR, ndip, mindip_deg, maxdip_deg, ntheta, nxny, neps, trunc, minepi,
maxepi, nepi, min_seis_depth, and max_seis_depth, are the same as for RjbMeanVar.py,
above, with the addition of:
M: The earthquake magnitude (float).
zhyp: The hypocentral depth of the earthquake (float).</p>
</div>
<div class="section" id="output-file-naming-convention">
<h1>Output File Naming Convention</h1>
<p>The file names take the form:</p>
<blockquote>
Rjb_S14_mechA_ar1p0_seis0_15_Ratios.csv</blockquote>
<p>Where:
&quot;Rjb&quot; is the the <em>filebase</em> parameter in the configuration file.
&quot;S14&quot; is the <em>rup_dim_model</em> (either &quot;S14&quot; or &quot;WC94&quot;).
&quot;mechA&quot; specifies the rupture mechanism parameter <em>mech</em>, where &quot;A&quot; is one of &quot;A&quot;,
&quot;SS&quot;, &quot;N&quot;, or &quot;R&quot;.
&quot;ar1p0&quot; is the aspect ratio specified with the <em>AR</em> parameter, where the decimal point
is replaced with the letter 'p'.
&quot;seis0_15&quot; is the range min/max seismogenic depths (in this case 0 to 15 km).
&quot;Ratios&quot; is either &quot;Ratios&quot; or &quot;Var&quot; specifying whether the file contains Repi to Rjb
(or Rrup) ratios or variances.</p>
</div>
<div class="section" id="output-file-format">
<h1>Output File Format</h1>
<p>Each output file starts with six header lines (each beginning with &quot;#&quot;) specifying
the processing parameters. This is followed by a line (comma-separated) providing the
column headers. The first column, &quot;Repi_km&quot;, is the epicentral distance. The following
columns R(magnitude) (&quot;R&quot; for &quot;ratio&quot;) or V(magnitude) (&quot;V&quot; for &quot;variance) provide the
values for a given Repi and magnitude. The table is intended for bi-variate interpolation.
The ratios are Rjb (or Rrup) to Repi.</p>
</div>
</div>
</body>
</html>
